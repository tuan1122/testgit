<script setup>
import { ref } from 'vue';

/* ===== CONFIG ===== */
const rightSize = ref(0); // 0 = đóng ban đầu
const minRight = 300;
const maxRight = 300;

function toggleRight() {
  rightSize.value = rightSize.value === 0 ? maxRight : 0;
}
</script>

<template>
  <div class="split-wrap">
    <el-splitter style="height: 400px; border: 1px solid #dcdfe6">
      <!-- Panel trái -->
      <el-splitter-panel>
        <div class="content">MAIN CONTENT</div>
      </el-splitter-panel>

      <!-- Panel phải -->
      <el-splitter-panel
        :size="rightSize"
        :min-size="minRight"
        :max-size="maxRight"
        @update:size="(val) => (rightSize = val)"
        :resizable="false"
      >
        <div class="content right">GUIDELINE PANEL</div>
      </el-splitter-panel>
    </el-splitter>

    <!-- ===== Custom Toggle Button ===== -->
    <div class="my-collapse-btn" @click="toggleRight">
      <span class="vertical-text" :class="{ closeText: rightSize !== 0 }">
        {{ rightSize === 0 ? 'GUIDELINE' : 'CLOSE' }}
      </span>
    </div>
  </div>
</template>

<style scoped>
/* ===== Layout Wrapper ===== */
.split-wrap {
  position: relative;
  width: 100%;
}

/* ===== Demo content ===== */
.content {
  padding: 20px;
  font-weight: bold;
}

.right {
  background: #f5f7fa;
}

/* ===== Smooth animation ===== */
.el-splitter-panel {
  transition: width 1s ease-in-out;
}

/* ===== Ẩn collapse mặc định ===== */
.el-splitter-bar__horizontal-collapse {
  display: none !important;
}

/* ===== Custom Toggle Button ===== */
.my-collapse-btn {
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);

  background: #409eff;
  color: white;
  cursor: pointer;
  border-radius: 7px 0 0 7px;
  user-select: none;
  z-index: 10;

  /* Kích thước cố định */
  width: 20px;
  height: 130px;

  display: flex;
  align-items: center;
  justify-content: center;
}

/* ===== Vertical Text ===== */
.vertical-text {
  writing-mode: vertical-rl;
  text-orientation: mixed;
  letter-spacing: 2px;
  font-size: 13px;
  font-weight: 600;
  color: white;
}

/* ===== CLOSE text màu đỏ ===== */
.closeText {
  color: #ff3b30;
}
</style>
